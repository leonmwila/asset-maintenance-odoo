<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- PDF Barcode Label Template - Based on Product Label Layout -->
    <template id="report_lot_barcode_document">
            <t t-call="web.html_container">
            <t t-set="data_report_margin_top" t-value="2"/>
            <t t-set="data_report_header_spacing" t-value="2"/>
            
            <div class="page" style="padding: 0; margin: 0; text-align: center;">
                <style>
                    @page {
                        size: A4;
                        margin: 2mm;
                    }
                    body {
                        margin: 0;
                        padding: 0;
                    }
                    .o_label {
                        width: 51mm;
                        height: 25.4mm;
                        display: inline-block;
                        text-align: center;
                        padding: 2mm;
                        vertical-align: top;
                        margin: 0.5mm;
                        border: 1pt solid #000;
                        box-sizing: border-box;
                        overflow: hidden;
                        page-break-inside: avoid;
                    }
                    .o_label_barcode {
                        width: 100%;
                        height: 12mm;
                        object-fit: contain;
                        display: block;
                        margin: 0 auto;
                    }
                    .o_label_text {
                        font-size: 6pt;
                        font-weight: bold;
                        margin-top: 1mm;
                        line-height: 1.1;
                        overflow: hidden;
                        text-overflow: ellipsis;
                    }
                    .o_label_grz {
                        font-size: 5pt;
                        color: #666;
                        margin-top: 0.5mm;
                    }
                </style>
                
                <t t-foreach="docs" t-as="lot">
                    <span class="o_label">
                        <!-- Barcode using t-field with barcode widget -->
                        <t t-if="lot.grz_number">
                            <div t-field="lot.grz_number" t-options="{'widget': 'barcode', 'symbology': 'Code128', 'width': 400, 'height': 100, 'img_style': 'width:100%;height:12mm;'}"/>
                        </t>
                        <t t-else="">
                            <div t-field="lot.name" t-options="{'widget': 'barcode', 'symbology': 'Code128', 'width': 400, 'height': 100, 'img_style': 'width:100%;height:12mm;'}"/>
                        </t>
                        
                        <!-- Product Name -->
                        <div class="o_label_text">
                            <t t-esc="lot.product_id.name"/>
                        </div>
                        
                        <!-- GRZ Number display -->
                        <t t-if="lot.grz_number">
                            <div class="o_label_grz">
                                <t t-esc="lot.grz_number"/>
                            </div>
                        </t>
                    </span>
                </t>
            </div>
        </t>
    </template>

    <!-- ZPL Barcode Label Template -->
    <template id="report_lot_barcode_zpl_document">
        <t t-foreach="docs" t-as="lot">^XA
^FO50,50^BY2^BCN,100,Y,N,N^FD<t t-esc="lot.name"/>^FS
^FO50,170^A0N,25,25^FD<t t-esc="lot.name"/>^FS
^FO50,200^A0N,20,20^FD<t t-esc="lot.product_id.name[:40]"/>^FS<t t-if="lot._fields.get('grz_number') and lot.grz_number">
^FO50,230^A0N,18,18^FDGRZ: <t t-esc="lot.grz_number"/>^FS</t>
^XZ
        </t>
    </template>
</odoo>
